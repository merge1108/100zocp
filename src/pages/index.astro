---
import BaseLayout from "../layouts/BaseLayout.astro";
import Icon from "../components/Icon.astro";
import homeData from "../content/home.json";

const modules = import.meta.glob("../content/cases/*.json", { eager: true });
const cases = Object.values(modules).map((m: any) => (m as any).default);
const home:any = homeData as any;
const heroTitle = home?.hero_title || "영상과 광고를 한 번에, 쉽고 빠르게.";
const heroSupport = home?.hero_support || "유튜브 영상 제작, 구글·메타 광고 집행, 성과 추적과 사후 관리까지 한 번에 맡기세요.";
const heroBadges:string[] = Array.isArray(home?.hero_badges) ? home.hero_badges : ["3일 내 업로드 목표","상담 무료","전화 중심 성과 추적"];
const ctas = home?.hero_cta || { primary:{text:"상담문의",link:"/contact"}, secondary:[{text:"패키지 보기",link:"/packages"},{text:"포트폴리오",link:"/portfolio"}] };
const what = Array.isArray(home?.what_we_do) ? home.what_we_do : [
  { kicker:"제작", title:"유튜브 영상 제작", image:"https://picsum.photos/seed/video/800/800", alt:"유튜브 영상 제작" },
  { kicker:"광고", title:"구글/메타 광고 집행", image:"https://picsum.photos/seed/ads/800/800", alt:"광고 집행" },
  { kicker:"관리", title:"성과 추적 및 사후 관리", image:"https://picsum.photos/seed/report/800/800", alt:"성과 추적" }
];
const about = Array.isArray(home?.about) ? home.about : [
  { kicker:"원스톱", title:"원스톱 광고대행", image:"https://picsum.photos/seed/onestop/800/800", alt:"원스톱 광고대행" },
  { kicker:"제작", title:"촬영 · 편집 · 집행", image:"https://picsum.photos/seed/process/800/800", alt:"제작 체계" },
  { kicker:"리포트", title:"주간·종료 보고", image:"https://picsum.photos/seed/reporting/800/800", alt:"리포트" }
];
---

<BaseLayout title={(home?.seo?.title || heroTitle) + " | 백조마케팅"} desc={home?.seo?.description || heroSupport} og={home?.seo?.og_image}>
  <main id="main">
    <!-- HERO -->
    <section class="hero" data-section-id="hero">
      <div class="copy container">
        <h1 class="h1">{heroTitle}</h1>
        <p class="lead">{heroSupport}</p>
        <div class="badges" aria-label="핵심 가치">
          {heroBadges.map(b => (<span class="badge"><span class="dot" aria-hidden="true"></span> {b}</span>))}
        </div>
        <div style="margin-top:16px; display:flex; gap:12px; flex-wrap:wrap">
          <a class="btn" href={ctas.primary?.link || "/contact"} data-cta="hero_primary">{ctas.primary?.text || "상담문의"}</a>
          {(ctas.secondary||[]).map((s:any, i:number)=> (<a class="btn outline" href={s.link} data-cta={`hero_secondary_${i}`}>{s.text}</a>))}
        </div>
      </div>
    </section>

    <!-- 무엇을 제공하나요? (이미지 카드) -->
    <section class="section" data-section-id="what_we_do">
      <div class="container">
        <h2 class="h2" style="margin-bottom:var(--space-3)">무엇을 제공하나요?</h2>
        <div class="grid stack-md">
          {what.map((w:any) => (
            <figure class="card span-4">
              <img src={w.image} alt={w.alt} />
              <figcaption class="txt"><span class="kicker">{w.kicker}</span><strong>{w.title}</strong></figcaption>
            </figure>
          ))}
        </div>
      </div>
    </section>

    <!-- 포트폴리오 미리보기 -->
    <section class="section" data-section-id="portfolio_preview">
      <div class="container">
        <h2 class="h2" style="margin-bottom:var(--space-3)">포트폴리오</h2>
        <div class="grid stack-md">
          {cases.map((c: any) => (
            <figure class="card span-4">
              <img src={c.image} alt={c.alt} />
              <figcaption class="txt">
                <span class="kicker">{c.kicker}</span>
                <strong>{c.title}</strong>
              </figcaption>
            </figure>
          ))}
        </div>
      </div>
    </section>

    <!-- 회사소개 (사진형 카드) -->
    <section class="section" data-section-id="about">
      <div class="container">
        <h2 class="h2" style="margin-bottom:var(--space-3)">회사소개</h2>
        <p class="muted">원스톱 광고대행으로 기획·제작·집행을 빠르게 연결합니다.</p>
        <div class="grid stack-md">
          {about.map((a:any) => (
            <figure class="card span-4">
              <img src={a.image} alt={a.alt} />
              <figcaption class="txt"><span class="kicker">{a.kicker}</span><strong>{a.title}</strong></figcaption>
            </figure>
          ))}
        </div>
      </div>
    </section>
  </main>
</BaseLayout>
